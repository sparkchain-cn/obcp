<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>编辑</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="format-detection" content="telephone=no">
<link rel="stylesheet" href="/admin/layui/css/layui.css" media="all" />
<link rel="stylesheet" href="/admin/css/main.css" media="all" />

<script type="text/javascript" src="/admin/layui/layui.js"></script>
<script type="text/javascript" src="/admin/js/main.js"></script>
</head>

<body class="childrenBody layui-bg-gray">
	<div class="layui-fluid layui-bg-white">

		<div class="layui-container">
			<h4 class="useredit-title">用户信息修改</h4>
			<div class="layui-row">
				<form class="layui-form" action="">
					<div class="layui-form-item">
						<label class="layui-form-label">用户类型：</label>
						<div class="layui-input-block">
							<select name="city" lay-verify="required" id="typeselect">
								<option value=""></option>
							</select>
						</div>
					</div>

					<div class="layui-form-item">
						<label class="layui-form-label">用户账号：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入用户账号" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">酒庄名称：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入酒庄名称" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">国家：</label>
						<div class="layui-input-block">
							<select name="modules" lay-verify="required" lay-search="">
								<option value="">请选择国家</option>
								<option value="1">layer</option>
								<option value="2">form</option>
								<option value="3">layim</option>
								<option value="4">element</option>
								<option value="5">laytpl</option>
								<option value="6">upload</option>
								<option value="7">laydate</option>
								<option value="8">laypage</option>
								<option value="9">flow</option>
								<option value="10">util</option>
								<option value="11">code</option>
								<option value="12">tree</option>
								<option value="13">layedit</option>
								<option value="14">nav</option>
								<option value="15">tab</option>
								<option value="16">table</option>
								<option value="17">select</option>
								<option value="18">checkbox</option>
								<option value="19">switch</option>
								<option value="20">radio</option>
							</select>

						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">产区：</label>
						<div class="layui-input-block">
							<select name="city" lay-verify="required">
								<option value=""></option>
								<option value="0">北京</option>
								<option value="1">上海</option>
								<option value="2">广州</option>
								<option value="3">深圳</option>
								<option value="4">杭州</option>
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">联系人：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入酒庄名称" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">联系电话：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入酒庄名称" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">邮箱地址：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入酒庄名称" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">酒庄地址：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入酒庄名称" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">酒庄网址：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入酒庄名称" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">社交工具：</label>
						<div class="layui-input-block">
							<select name="city" lay-verify="required">
								<option value=""></option>
								<option value="0">北京</option>
								<option value="1">上海</option>
								<option value="2">广州</option>
								<option value="3">深圳</option>
								<option value="4">杭州</option>
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">社交账号：</label>
						<div class="layui-input-block">
							<input type="text" name="title" required lay-verify="required"
								placeholder="请输入社交账号" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">酒类：</label>
						<div class="layui-input-block">
							<input type="checkbox" name="like[write]" lay-filter="select1"
								value="1" lay-skin="primary" title="葡萄酒"> <input
								type="checkbox" name="like[read]" lay-filter="select1" value="2"
								lay-skin="primary" title="起泡酒" checked> <input
								type="checkbox" name="like[dai]" lay-filter="select1" value="3"
								lay-skin="primary" title="威士忌"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="4"
								lay-skin="primary" title="伏特加"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="5"
								lay-skin="primary" title="朗姆酒"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="6"
								lay-skin="primary" title="利口酒"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="7"
								lay-skin="primary" title="啤酒"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="8"
								lay-skin="primary" title="清酒"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="9"
								lay-skin="primary" title="龙舌兰"> <input type="checkbox"
								name="like[dai]" lay-filter="select1" value="10"
								lay-skin="primary" title="金酒">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">营业执照：</label>
						<div class="layui-input-block">
							<div class="layui-upload">
								<button type="button" class="layui-btn layui-btn-primary"
									id="upload-more">
									<i class="layui-icon">&#xe67c;</i>文件上传
								</button>
								<input class="layui-upload-file" type="file" accept="undefined"
									name="file" multiple="">
								<blockquote class="layui-elem-quote layui-quote-nm"
									style="margin-top: 10px;">
									预览图：
									<div class="layui-upload-list" id="upload-more-list"></div>
								</blockquote>
							</div>
						</div>
					</div>
					<div class="layui-form-item layui-form-text">
						<label class="layui-form-label">附加信息：</label>
						<div class="layui-input-block">
							<textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
						</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-input-block">
							<button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
							<button type="reset" class="layui-btn layui-btn-primary">重置</button>
						</div>
					</div>
				</form>
			</div>
		</div>

		<!--图片预览-->
		<div id='prevModal'>
			<img id='img_prev' />
		</div>
</body>

<script>
		layui.use(['form', "upload", "jquery"], function() {
			var form = layui.form,
				upload = layui.upload,
				$ = layui.jquery;

			$.get("/admin/json/message.json", {}, function(data) {
				console.log(data);
				//		            if (data.code == 0) {
				$.each(data, (index, item) => {
					console.log(index, item)
					$("#typeselect").append(new Option(item.msgId, item.userName));
				});
				form.render();
				//		            }
			});

			//上传图片
			var uploadInst = upload.render({
				elem: '#upload-more' //绑定元素
					,
				accept: "images", //上传类型，默认图片格式：jpg|png|gif|bmp|jpeg
				multiple: "true", //是否开启多文件上传
				number: 5, //同时上传最多
				drag: "true", //是否可以拖拽上传
				url: 'upload/' //上传接口
					,
				choose: function(obj) { //选择文件的回调，obj为选中的文件
					var files = obj.pushFile(); //将每次选择的文件追加到文件队列

					//图像预览，如果是多文件，会逐个添加。(不支持ie8/9)
					obj.preview(function(index, file, result) {
						var imgobj = new Image(); //创建新img对象
						imgobj.src = result; //指定数据源
						imgobj.className = 'thumb';

						imgobj.onclick = function(result) { //单击预览
							img_prev.src = this.src;
							layer.photos({
								photos: //格式见API文档手册页
								{
									"title": "", //相册标题
									"id": 123, //相册id
									"start": 0, //初始显示的图片序号，默认0
									"data": [ //相册包含的图片，数组格式
										{
											"alt": "图片名",
											"pid": 666, //图片id
											"src": imgobj.src, //原图地址
											"thumb": '' //缩略图地址
										}
									]
								},
								anim: 5 //0-6的选择，指定弹出图片动画类型，默认随机
							});
						};

						document.getElementById("upload-more-list").appendChild(imgobj); //添加到预览区域
					});

				},
				done: function(res) {
					//上传完毕回调

				},
				error: function() {
					//请求异常回调
				}
			});

			//各种基于事件的操作，下面会有进一步介绍
			form.on('submit(formDemo)', function(data) {
				console.log(data.elem) //被执行事件的元素DOM对象，一般为button对象
				console.log(data.form) //被执行提交的form对象，一般在存在form标签时才会返回
				console.log(data.field) //当前容器的全部表单字段，名值对形式：{name: value}

				return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
			});

		});
	</script>

</html>